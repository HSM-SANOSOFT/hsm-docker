name: HSM-BACKEND

configs:
  global_env:
    file: ./envs/global.env

services:

  #Gateway service
  HSM-BE-GATEWAY-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-gateway-ms:latest
    container_name: HSM-BE-GATEWAY-MS
    ports:
      - $GATEWAY_MICROSERVICE_PORT:$GATEWAY_MICROSERVICE_PORT
    networks:
      app_network:
        ipv4_address: $GATEWAY_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/gateway.env
    restart: unless-stopped

  #Auth service
  HSM-BE-AUTH-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-auth-ms:latest
    container_name: HSM-BE-AUTH-MS
    ports:
      - $AUTH_WEBSOCKET_MICROSERVICE_PORT:$AUTH_WEBSOCKET_MICROSERVICE_PORT
    networks:
      app_network:
        ipv4_address: $AUTH_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/auth.env
    restart: unless-stopped

  #Coms service
  HSM-BE-COMS-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-coms-ms:latest
    container_name: HSM-BE-COMS-MS
    networks:
      app_network:
        ipv4_address: $COMS_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/coms.env
    restart: unless-stopped

  #COMMON service
  HSM-BE-COMMON-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-common-ms:latest
    container_name: HSM-BE-COMMON-MS
    networks:
      app_network:
        ipv4_address: $COMMON_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/common.env
    restart: unless-stopped

  #Examenes service
  HSM-BE-EXAMENES-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-examenes-ms:latest
    container_name: HSM-BE-EXAMENES-MS
    networks:
      app_network:
        ipv4_address: $EXAMENES_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/examenes.env
    restart: unless-stopped

  #Facturacion service
  HSM-BE-FACTURACION-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-facturacion-ms:latest
    container_name: HSM-BE-FACTURACION-MS
    networks:
      app_network:
        ipv4_address: $FACTURACION_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/facturacion.env
    restart: unless-stopped

  # Farmacia Service
  HSM-BE-FARMACIA-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-farmacia-ms:latest
    container_name: HSM-BE-FARMACIA-MS
    networks:
      app_network:
        ipv4_address: $FARMACIA_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/farmacia.env
    restart: unless-stopped

  # Hospitalizacion Service
  HSM-BE-HOSPITALIZACION-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-hospitalizacion-ms:latest
    container_name: HSM-BE-HOSPITALIZACION-MS
    networks:
      app_network:
        ipv4_address: $HOSPITALIZACION_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/hospitalizacion.env
    restart: unless-stopped

  # Medicos Service
  HSM-BE-MEDICOS-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-medicos-ms:latest
    container_name: HSM-BE-MEDICOS-MS
    networks:
      app_network:
        ipv4_address: $MEDICOS_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/medicos.env
    restart: unless-stopped

  #Pacientes service
  HSM-BE-PACIENTES-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-pacientes-ms:latest
    container_name: HSM-BE-PACIENTES-MS
    networks:
      app_network:
        ipv4_address: $PACIENTES_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/pacientes.env
    restart: unless-stopped

  # Personal Service
  HSM-BE-PERSONAL-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-personal-ms:latest
    container_name: HSM-BE-PERSONAL-MS
    networks:
      app_network:
        ipv4_address: $PERSONAL_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/personal.env
    restart: unless-stopped
    # Postulantes Service
  HSM-BE-POSTULANTES-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-postulantes-ms:latest
    container_name: HSM-BE-POSTULANTES-MS
    networks:
      app_network:
        ipv4_address: $POSTULANTES_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/postulantes.env
    restart: unless-stopped

  # Users Service
  HSM-BE-USERS-MS:
    image: ghcr.io/hsm-sanosoft/hsm-be-users-ms:latest
    container_name: HSM-BE-USERS-MS
    networks:
      app_network:
        ipv4_address: $USERS_MICROSERVICE_HOST
    env_file:
      - ./envs/global.env
      - ./envs/users.env
    restart: unless-stopped

networks:
  app_network:
    driver: bridge
    ipam:
      config:
        - subnet: $DOCKER_SUBNET
